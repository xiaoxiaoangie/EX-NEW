<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TP Portal v2</title>
  <style>
    :root {
      --bg: #f5f7fb; --surface: #fff; --soft: #f8fafc; --line: #e2e8f0;
      --text: #0f172a; --sub: #475569; --muted: #64748b;
      --brand: #0f6fff; --brand-soft: #eaf2ff;
      --ok: #0f9d58; --warn: #b45309; --danger: #b91c1c;
      --radius: 14px; --shadow: 0 10px 26px rgba(15,23,42,.08);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "SF Pro Text", "Google Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text);
      background: radial-gradient(circle at 8% -20%, #dbeafe 0, transparent 40%), var(--bg);
      min-height: 100vh;
    }
    .shell {
      min-height: 100vh;
      display: grid;
      grid-template-columns: 240px 300px 1fr;
      grid-template-rows: 72px 1fr;
      grid-template-areas: "top top top" "left sub main";
    }
    .topbar {
      grid-area: top;
      position: sticky; top: 0; z-index: 9;
      height: 72px; border-bottom: 1px solid var(--line);
      background: rgba(255,255,255,.9); backdrop-filter: blur(8px);
      display: flex; justify-content: space-between; align-items: center; padding: 0 18px 0 22px;
    }
    .brand { display: flex; gap: 12px; align-items: center; }
    .brand-mark { width: 36px; height: 36px; border-radius: 11px; background: linear-gradient(145deg,#1a73e8,#0f6fff); box-shadow: 0 5px 14px rgba(15,111,255,.35); }
    .brand h1 { font-size: 17px; font-weight: 650; }
    .chip { font-size: 11px; font-weight: 600; color: #0b4bb3; background: #dbeafe; padding: 4px 8px; border-radius: 999px; }
    .actions { display: flex; gap: 10px; align-items: center; }
    .btn {
      border: 1px solid var(--line); background: var(--surface); color: var(--sub);
      border-radius: 10px; padding: 8px 12px; font-size: 13px; cursor: pointer;
    }
    .switch {
      display: flex; gap: 6px; padding: 4px; border-radius: 11px;
      border: 1px solid var(--line); background: var(--soft);
    }
    .switch button { border: 0; background: transparent; color: var(--muted); border-radius: 8px; padding: 6px 10px; font-size: 12px; cursor: pointer; }
    .switch button.active { background: var(--surface); color: var(--text); box-shadow: 0 1px 2px rgba(15,23,42,.12); }

    .left { grid-area: left; border-right: 1px solid var(--line); background: #fbfcff; padding: 14px 12px; }
    .workspace { border: 1px solid var(--line); background: var(--surface); border-radius: 12px; padding: 11px; margin-bottom: 12px; }
    .workspace .t1 { font-size: 12px; color: var(--muted); }
    .workspace .t2 { font-size: 14px; font-weight: 600; }
    .core-btn {
      width: 100%; text-align: left; display: flex; justify-content: space-between; align-items: center;
      border: 1px solid transparent; border-radius: 11px; margin-bottom: 6px; padding: 10px 11px;
      background: transparent; color: var(--sub); font-size: 13px; font-weight: 550; cursor: pointer;
    }
    .core-btn:hover { background: #f1f5ff; }
    .core-btn.active { background: var(--brand-soft); color: #0b4bb3; border-color: #cfe1ff; }

    .subnav { grid-area: sub; border-right: 1px solid var(--line); background: var(--surface); padding: 16px; overflow: auto; }
    .sub-title { font-size: 18px; font-weight: 650; margin-bottom: 3px; }
    .sub-desc { font-size: 12px; color: var(--muted); margin-bottom: 14px; }
    .group { margin-bottom: 15px; }
    .group h4 { font-size: 11px; color: var(--muted); margin-bottom: 7px; text-transform: uppercase; letter-spacing: .08em; }
    .leaf {
      width: 100%; text-align: left; border: 1px solid transparent; background: transparent;
      border-radius: 9px; padding: 9px 10px; margin-bottom: 4px; color: var(--sub); font-size: 13px; cursor: pointer;
    }
    .leaf:hover { background: var(--soft); }

    .main { grid-area: main; padding: 22px; overflow: auto; }
    .hero {
      border: 1px solid #dbe8ff; border-radius: 18px; padding: 16px;
      background: linear-gradient(155deg,#fff,#f8fbff); box-shadow: var(--shadow); margin-bottom: 14px;
    }
    .crumb { font-size: 12px; color: var(--muted); margin-bottom: 7px; }
    .hero h2 { font-size: 26px; }
    .hero p { margin-top: 5px; color: var(--sub); font-size: 13px; }

    .kpis { display: grid; grid-template-columns: repeat(4,minmax(0,1fr)); gap: 10px; margin-bottom: 12px; }
    .kpi { border: 1px solid var(--line); border-radius: var(--radius); background: var(--surface); padding: 13px; }
    .kpi .k { font-size: 12px; color: var(--muted); }
    .kpi .v { font-size: 23px; font-weight: 680; margin-top: 4px; }
    .kpi .d { font-size: 12px; margin-top: 4px; }
    .up { color: var(--ok); } .down { color: var(--danger); }

    .grid { display: grid; grid-template-columns: 1.2fr 1fr; gap: 12px; }
    .card { border: 1px solid var(--line); border-radius: var(--radius); background: var(--surface); padding: 14px; }
    .card h3 { font-size: 15px; margin-bottom: 9px; }
    .task {
      padding: 10px; border: 1px solid var(--line); border-radius: 10px; margin-bottom: 8px;
      display: flex; justify-content: space-between; font-size: 13px;
    }
    .pill { font-size: 11px; padding: 4px 8px; border-radius: 999px; }
    .warn { background: #fff7ed; color: var(--warn); }
    .danger { background: #fef2f2; color: var(--danger); }
    .note { border: 1px dashed var(--line); border-radius: 12px; padding: 13px; color: var(--muted); font-size: 13px; background: #fbfdff; }

    .cmdk { position: fixed; inset: 0; background: rgba(15,23,42,.45); display: none; align-items: flex-start; justify-content: center; padding-top: 10vh; z-index: 99; }
    .cmdk.show { display: flex; }
    .cmdk-box { width: min(760px,92vw); border: 1px solid var(--line); border-radius: 14px; background: var(--surface); box-shadow: 0 26px 55px rgba(15,23,42,.24); overflow: hidden; }
    .cmdk-box input { width: 100%; border: 0; border-bottom: 1px solid var(--line); padding: 14px 16px; font-size: 14px; outline: none; }
    .cmdk-item { padding: 10px 12px; display: flex; justify-content: space-between; font-size: 13px; }
    .cmdk-item:hover { background: var(--soft); }

    @media (max-width: 1120px) {
      .shell { grid-template-columns: 220px 1fr; grid-template-areas: "top top" "left main"; }
      .subnav { display: none; }
      .kpis { grid-template-columns: repeat(2,minmax(0,1fr)); }
      .grid { grid-template-columns: 1fr; }
    }
    @media (max-width: 760px) {
      .shell { grid-template-columns: 1fr; grid-template-areas: "top" "main"; }
      .left { display: none; }
      .kpis { grid-template-columns: 1fr; }
      .topbar { padding: 0 10px; }
    }
  </style>
</head>
<body>
<div class="shell">
  <header class="topbar">
    <div class="brand"><div class="brand-mark"></div><h1>EX TP Portal</h1><span class="chip">Institution</span></div>
    <div class="actions">
      <button class="btn" id="openCmd">Search / Command ⌘K</button>
      <div class="switch" id="modeSwitch">
        <button data-mode="web2" class="active">Web2</button>
        <button data-mode="web3">Web3</button>
        <button data-mode="hybrid">Hybrid</button>
      </div>
      <button class="btn">Owner</button>
    </div>
  </header>

  <aside class="left">
    <div class="workspace"><div class="t1">Workspace</div><div class="t2">Global Operations</div></div>
    <div id="coreNav"></div>
  </aside>

  <aside class="subnav">
    <div class="sub-title" id="subTitle">Overview</div>
    <div class="sub-desc">Core IA + capability packs</div>
    <div id="subMenu"></div>
  </aside>

  <main class="main">
    <section class="hero">
      <div class="crumb" id="crumb">Overview / Executive Summary</div>
      <h2 id="pageTitle">Executive Summary</h2>
      <p id="pageDesc">Institution-level visibility across transactions, treasury, and compliance.</p>
    </section>

    <section class="kpis" id="kpis"></section>

    <section class="grid">
      <div class="card">
        <h3>Priority Queue</h3>
        <div class="task"><span>Settlement batch #SB-10291 awaiting release</span><span class="pill warn">T+0</span></div>
        <div class="task"><span>High-risk payout flagged (rule KYT-17)</span><span class="pill danger">Risk</span></div>
        <div class="task"><span>Fee template update pending approval</span><span class="pill warn">Approval</span></div>
      </div>
      <div class="card">
        <h3>IA Principle</h3>
        <div class="note">Task-oriented IA for institutional users: one formal Core navigation, with Web2/Web3/Hybrid capability packs dynamically injected into secondary menu.</div>
      </div>
    </section>
  </main>
</div>

<div class="cmdk" id="cmdk">
  <div class="cmdk-box">
    <input placeholder="Type a command, page, or customer MID..." />
    <div class="cmdk-item"><span>Go to Treasury / Settlement Batches</span><span>Page</span></div>
    <div class="cmdk-item"><span>Create payout order</span><span>Action</span></div>
    <div class="cmdk-item"><span>Open Download Center</span><span>Page</span></div>
    <div class="cmdk-item"><span>Search MID: CLT20250001</span><span>Lookup</span></div>
  </div>
</div>

<script>
const core = [
  ['overview','Overview'],['customers','Customers'],['transactions','Transactions'],
  ['treasury','Treasury & Settlement'],['risk','Risk & Compliance'],['reports','Reports'],['settings','Settings']
];
const baseMenu = {
  overview:[{t:'Summary',i:['Executive Summary','Alerts','SLA Health']}],
  customers:[{t:'Customer Ops',i:['Customer Profiles','Product Enablement','Rate Plans']}],
  transactions:[{t:'Processing',i:['Payins','Payouts','Exceptions']}],
  treasury:[{t:'Financial Operations',i:['Accounts','Balances','Settlement Batches','Reconciliation']}],
  risk:[{t:'Controls',i:['Rules','Screening','Case Management']}],
  reports:[{t:'Insights',i:['Analytics','Download Center','Scheduled Exports']}],
  settings:[{t:'Administration',i:['Users & Roles','Approval Policy','API Credentials']}]
};
const pack = {
  web2:{transactions:['Card Acquiring','Chargebacks'], treasury:['Bank Settlement','Fee Invoicing']},
  web3:{transactions:['On-chain Transfers','Address Screening'], treasury:['Wallet Treasury','Gas & Network Fees']},
  hybrid:{transactions:['On/Off Ramp Orders','Cross-rail Routing'], treasury:['Liquidity Bridge','Cross-rail Reconciliation']}
};
const kpis = {
  web2:[['Daily Processing Volume','$182.4M','+6.3% WoW','up'],['Success Rate','99.12%','+0.21%','up'],['Pending Settlement','$12.7M','-3.4%','up'],['Chargeback Ratio','0.42%','-0.08%','up']],
  web3:[['Daily Processing Volume','$74.8M','+4.8% WoW','up'],['On-chain Success','98.43%','+0.31%','up'],['Wallet Liquidity Buffer','$18.2M','+1.2%','up'],['KYT Alerts','37','+9','down']],
  hybrid:[['Daily Processing Volume','$231.6M','+8.1% WoW','up'],['Cross-rail Conversion','96.74%','+0.44%','up'],['Pending Settlement','$19.1M','-2.8%','up'],['Exception Queue','21','-5','up']]
};
let mode='web2', current='overview';
const coreNav=document.getElementById('coreNav'), subMenu=document.getElementById('subMenu');
const subTitle=document.getElementById('subTitle'), pageTitle=document.getElementById('pageTitle');
const pageDesc=document.getElementById('pageDesc'), crumb=document.getElementById('crumb');
function renderCore(){coreNav.innerHTML=core.map(([k,l])=>`<button class="core-btn ${k===current?'active':''}" data-k="${k}">${l}<span>›</span></button>`).join('');}
function menuFor(key){const g=JSON.parse(JSON.stringify(baseMenu[key]||[])); const e=pack[mode][key]; if(e) g.push({t:mode.toUpperCase()+' Pack',i:e}); return g;}
function renderSub(){const label=core.find(([k])=>k===current)[1]; subTitle.textContent=label; subMenu.innerHTML=menuFor(current).map(g=>`<div class="group"><h4>${g.t}</h4>${g.i.map(i=>`<button class="leaf" data-i="${i}">${i}</button>`).join('')}</div>`).join('');}
function renderKpi(){document.getElementById('kpis').innerHTML=kpis[mode].map(([k,v,d,t])=>`<div class="kpi"><div class="k">${k}</div><div class="v">${v}</div><div class="d ${t}">${d}</div></div>`).join('');}
function setHead(item='Executive Summary'){const label=core.find(([k])=>k===current)[1]; crumb.textContent=`${label} / ${item}`; pageTitle.textContent=item; pageDesc.textContent=`Professional institutional workflow for ${label.toLowerCase()} in ${mode.toUpperCase()} mode.`;}
coreNav.addEventListener('click',e=>{const b=e.target.closest('[data-k]'); if(!b) return; current=b.dataset.k; renderCore(); renderSub(); setHead();});
subMenu.addEventListener('click',e=>{const b=e.target.closest('[data-i]'); if(!b) return; setHead(b.dataset.i);});
document.getElementById('modeSwitch').addEventListener('click',e=>{const b=e.target.closest('[data-mode]'); if(!b) return; mode=b.dataset.mode; document.querySelectorAll('#modeSwitch button').forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderSub(); renderKpi(); setHead();});
const cmdk=document.getElementById('cmdk');
document.getElementById('openCmd').addEventListener('click',()=>cmdk.classList.add('show'));
cmdk.addEventListener('click',e=>{if(e.target===cmdk)cmdk.classList.remove('show');});
window.addEventListener('keydown',e=>{if((e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==='k'){e.preventDefault(); cmdk.classList.add('show');} if(e.key==='Escape')cmdk.classList.remove('show');});
renderCore(); renderSub(); renderKpi(); setHead();
</script>
</body>
</html>
