<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TP 产品中心</title>
    <style>
        :root {
            --bg: #f5f7fb;
            --surface: #ffffff;
            --surface-soft: #f8fafc;
            --border: #e2e8f0;
            --text: #0f172a;
            --text-secondary: #475569;
            --muted: #94a3b8;
            --brand: #2563eb;
            --brand-soft: #eff6ff;
            --success: #16a34a;
            --success-soft: #f0fdf4;
            --warning: #d97706;
            --warning-soft: #fffbeb;
            --danger: #dc2626;
            --danger-soft: #fef2f2;
            --shadow: 0 8px 24px rgba(15, 23, 42, 0.06);
            --radius: 14px;
            --side-width: 240px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", sans-serif;
            background: radial-gradient(1200px 500px at -10% -20%, #dbeafe 0%, rgba(219, 234, 254, 0) 50%), var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
        }

        .sidebar {
            width: var(--side-width);
            background: var(--surface);
            border-right: 1px solid var(--border);
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .brand {
            padding: 14px 12px;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fbff 100%);
        }

        .brand-title {
            font-size: 15px;
            font-weight: 700;
        }

        .brand-sub {
            margin-top: 4px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .menu-title {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: .08em;
            color: var(--muted);
            margin: 0 8px 2px;
        }

        .menu-item {
            width: 100%;
            border: 1px solid transparent;
            background: transparent;
            border-radius: 10px;
            text-align: left;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 10px 12px;
            transition: all .18s ease;
        }

        .menu-item:hover {
            border-color: var(--border);
            background: var(--surface-soft);
            color: var(--text);
        }

        .menu-item.active {
            border-color: #bfdbfe;
            background: var(--brand-soft);
            color: var(--brand);
            font-weight: 600;
        }

        .layout-main {
            flex: 1;
            padding: 24px;
            overflow: auto;
        }

        .page {
            display: none;
            max-width: 1180px;
        }

        .page.active { display: block; }

        .page-header {
            margin-bottom: 18px;
        }

        .breadcrumb {
            font-size: 12px;
            color: var(--muted);
            margin-bottom: 6px;
        }

        .page-title {
            font-size: 24px;
            font-weight: 750;
            letter-spacing: -0.01em;
        }

        .page-desc {
            margin-top: 8px;
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 18px;
            margin-bottom: 14px;
        }

        .card-title {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        .table th,
        .table td {
            padding: 10px 12px;
            border-bottom: 1px solid #eef2f7;
            text-align: left;
            vertical-align: top;
        }

        .table th {
            background: #f8fafd;
            color: var(--text-secondary);
            font-size: 12px;
            font-weight: 600;
        }

        .chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            border-radius: 999px;
            padding: 4px 10px;
            font-size: 11px;
            font-weight: 600;
            line-height: 1;
        }

        .chip.success { background: var(--success-soft); color: var(--success); }
        .chip.brand { background: var(--brand-soft); color: var(--brand); }
        .chip.warn { background: var(--warning-soft); color: var(--warning); }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .rule-box {
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--surface-soft);
            padding: 12px;
        }

        .rule-title {
            font-size: 13px;
            font-weight: 650;
            margin-bottom: 8px;
        }

        .rule-list {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.65;
            padding-left: 18px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 190px 1fr;
            gap: 10px;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dashed #e8eef5;
        }

        .form-row:last-child { border-bottom: none; }

        .form-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .inline {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }

        select,
        input[type="checkbox"] {
            accent-color: var(--brand);
        }

        select {
            height: 34px;
            border-radius: 8px;
            border: 1px solid var(--border);
            padding: 0 10px;
            font-size: 13px;
            background: #fff;
        }

        .check {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .note {
            margin-top: 12px;
            padding: 12px;
            border: 1px solid #bfdbfe;
            background: #f8fbff;
            border-radius: 10px;
            font-size: 12px;
            color: #1e3a8a;
            line-height: 1.7;
        }

        .btn-row {
            margin-top: 14px;
            display: flex;
            gap: 8px;
        }

        .btn {
            border: none;
            border-radius: 10px;
            padding: 9px 14px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn.primary {
            background: var(--brand);
            color: #fff;
        }

        .btn.ghost {
            background: #fff;
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }

        @media (max-width: 980px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; border-right: none; border-bottom: 1px solid var(--border); }
            .grid-2 { grid-template-columns: 1fr; }
            .form-row { grid-template-columns: 1fr; gap: 6px; }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="brand">
            <div class="brand-title">TP 产品中心</div>
            <div class="brand-sub">承兑产品配置（Phase 1）</div>
        </div>

        <div class="menu-title">Product Center</div>
        <button class="menu-item active" data-page="market">产品市场</button>
        <button class="menu-item" data-page="opened">已开通产品</button>
        <button class="menu-item" data-page="config">产品配置</button>
    </aside>

    <main class="layout-main">
        <section class="page active" id="page-market">
            <div class="page-header">
                <div class="breadcrumb">产品中心 / 产品市场</div>
                <h1 class="page-title">产品市场</h1>
                <p class="page-desc">查看租户已签约 SP 能力。本期承兑场景：BB 为承兑主能力，IPL 为可选法币账户能力。</p>
            </div>

            <div class="card">
                <div class="card-title">可用产品（按签约结果）</div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>产品</th>
                            <th>能力方</th>
                            <th>状态</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>承兑产品（On/Off-Ramp）</td>
                            <td><span class="chip brand">BB</span></td>
                            <td><span class="chip success">已签约</span></td>
                            <td>承兑主产品，商户开通入口。</td>
                        </tr>
                        <tr>
                            <td>数币钱包（Crypto Wallet）</td>
                            <td><span class="chip brand">BB</span></td>
                            <td><span class="chip success">默认开通</span></td>
                            <td>商户开通承兑时自动开通。</td>
                        </tr>
                        <tr>
                            <td>BB 法币账户</td>
                            <td><span class="chip brand">BB</span></td>
                            <td><span class="chip success">默认开通</span></td>
                            <td>承兑产品必带，且为主承接法币账户。</td>
                        </tr>
                        <tr>
                            <td>iPayLinks 法币账户</td>
                            <td><span class="chip warn">iPayLinks</span></td>
                            <td><span class="chip success">可选能力</span></td>
                            <td>仅在租户已签约 iPayLinks 且租户配置允许时，商户可选。</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section class="page" id="page-opened">
            <div class="page-header">
                <div class="breadcrumb">产品中心 / 已开通产品</div>
                <h1 class="page-title">已开通产品</h1>
                <p class="page-desc">这里展示租户侧“标准配置模板”。如需某个客户单独配置，请在客户中心操作。</p>
            </div>

            <div class="card">
                <div class="card-title">标准配置列表（租户级）</div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>产品</th>
                            <th>标准配置</th>
                            <th>归属 SP</th>
                            <th>作用范围</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>承兑产品</td>
                            <td>BB 承兑引擎 + 路由优先级（BB/IPL）</td>
                            <td>BB（主）+ iPayLinks（可选）</td>
                            <td>全商户（Phase 1）</td>
                        </tr>
                        <tr>
                            <td>数币钱包</td>
                            <td>随承兑默认开通</td>
                            <td>BB</td>
                            <td>全商户（自动）</td>
                        </tr>
                        <tr>
                            <td>BB 法币账户</td>
                            <td>随承兑默认开通（必选）</td>
                            <td>BB</td>
                            <td>全商户（自动）</td>
                        </tr>
                        <tr>
                            <td>iPayLinks 法币账户</td>
                            <td>租户允许后，商户可勾选</td>
                            <td>iPayLinks</td>
                            <td>按商户选择</td>
                        </tr>
                    </tbody>
                </table>
                <div class="note">
                    产品配置列表只维护“租户标准规则”。<br>
                    客户单独配置（如特定客户只走 IPL、特殊费率、例外流程）放在客户中心处理。
                </div>
            </div>
        </section>

        <section class="page" id="page-config">
            <div class="page-header">
                <div class="breadcrumb">产品中心 / 产品配置</div>
                <h1 class="page-title">承兑产品配置</h1>
                <p class="page-desc">本期重点：不在商户入网时直接让商户选“IPL/BB”，而是先由租户在此定义承兑产品配置。</p>
            </div>

            <div class="card">
                <div class="card-title">1) 租户签约场景</div>
                <div class="form-row">
                    <div class="form-label">当前签约能力</div>
                    <div class="inline">
                        <span class="chip brand">BB（必有）</span>
                        <span class="chip warn" id="iplSignedChip">iPayLinks（已签约）</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-label">场景模拟</div>
                    <div class="inline">
                        <select id="contractScenario">
                            <option value="BB_ONLY">场景1：仅签约 BB</option>
                            <option value="BB_IPL" selected>场景2：签约 BB + iPayLinks</option>
                        </select>
                        <span style="font-size:12px;color:var(--muted);">用于展示你提到的两种业务规则</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">2) 法币账户配置（承兑产品）</div>
                <div class="form-row">
                    <div class="form-label">BB 法币账户</div>
                    <div class="inline">
                        <label class="check">
                            <input type="checkbox" checked disabled>
                            BB（必选，承兑产品主承接）
                        </label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-label">iPayLinks 法币账户</div>
                    <div class="inline">
                        <label class="check">
                            <input type="checkbox" id="iplOptionCheck" checked>
                            允许商户额外勾选 iPayLinks
                        </label>
                        <span id="iplOptionHint" style="font-size:12px;color:var(--text-secondary);">已启用（商户可选）</span>
                    </div>
                </div>

                <div class="rule-box" style="margin-top:10px;">
                    <div class="rule-title">对应业务规则</div>
                    <ol class="rule-list">
                        <li>若租户只签约 BB：商户默认只能使用 BB 法币账户。</li>
                        <li>若租户签约 BB + iPayLinks：BB 仍必选，商户可再勾选 iPayLinks。</li>
                        <li>商户入网页面不直接硬编码选择逻辑，统一读取本页配置。</li>
                    </ol>
                </div>
            </div>

            <div class="card">
                <div class="card-title">3) 交易路由规则配置（放在这里）</div>
                <div class="grid-2">
                    <div class="rule-box">
                        <div class="rule-title">路由优先级（租户级）</div>
                        <div class="form-row">
                            <div class="form-label">默认路由</div>
                            <div>
                                <select id="routePriority">
                                    <option value="BB_FIRST" selected>BB 优先</option>
                                    <option value="IPL_FIRST">iPayLinks 优先</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-label">兜底规则</div>
                            <div class="inline">
                                <label class="check"><input type="checkbox" checked disabled> 主路由失败时回退到另一已开通账户</label>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-label">生效范围</div>
                            <div style="font-size:13px;color:var(--text-secondary);">全商户统一生效（Phase 1 不支持商户级路由）</div>
                        </div>
                    </div>

                    <div class="rule-box">
                        <div class="rule-title">Phase 1 路由边界</div>
                        <ol class="rule-list">
                            <li>只看“法币账户优先级”，不按金额/币种/国家做条件路由。</li>
                            <li>商户仅开通 BB 时，直接走 BB，不触发路由决策。</li>
                            <li>后续若要做复杂路由，可新增“路由策略中心”页面；本期不需要。</li>
                        </ol>
                    </div>
                </div>

                <div class="btn-row">
                    <button class="btn primary" onclick="saveConfig()">保存配置</button>
                    <button class="btn ghost" onclick="resetConfig()">恢复默认</button>
                </div>
            </div>

            <div class="card">
                <div class="card-title">4) 入网推送规则（只读）</div>
                <div class="note" style="margin-top:0;">
                    1. 承兑产品 + BB 数币钱包 + BB 法币账户：固定推送 BB 审核。<br>
                    2. iPayLinks 法币账户：商户勾选才推送 iPayLinks 审核。<br>
                    3. BB 与 iPayLinks 审核独立，互不依赖。
                </div>
            </div>
        </section>
    </main>

    <script>
        const menuItems = document.querySelectorAll('.menu-item');
        const pages = document.querySelectorAll('.page');
        const scenarioSelect = document.getElementById('contractScenario');
        const iplChip = document.getElementById('iplSignedChip');
        const iplCheck = document.getElementById('iplOptionCheck');
        const iplHint = document.getElementById('iplOptionHint');
        const routePriority = document.getElementById('routePriority');

        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                const page = item.getAttribute('data-page');
                menuItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                pages.forEach(p => p.classList.remove('active'));
                document.getElementById('page-' + page).classList.add('active');
            });
        });

        function applyScenario() {
            const mode = scenarioSelect.value;
            if (mode === 'BB_ONLY') {
                iplChip.textContent = 'iPayLinks（未签约）';
                iplChip.className = 'chip';
                iplChip.style.background = '#f1f5f9';
                iplChip.style.color = '#64748b';
                iplCheck.checked = false;
                iplCheck.disabled = true;
                iplHint.textContent = '未启用（租户未签约 iPayLinks）';
                routePriority.value = 'BB_FIRST';
                routePriority.disabled = true;
            } else {
                iplChip.textContent = 'iPayLinks（已签约）';
                iplChip.className = 'chip warn';
                iplChip.style.background = '';
                iplChip.style.color = '';
                iplCheck.disabled = false;
                iplCheck.checked = true;
                iplHint.textContent = '已启用（商户可选）';
                routePriority.disabled = false;
            }
        }

        scenarioSelect.addEventListener('change', applyScenario);

        function saveConfig() {
            alert('承兑产品配置已保存（原型演示）');
        }

        function resetConfig() {
            scenarioSelect.value = 'BB_IPL';
            routePriority.value = 'BB_FIRST';
            applyScenario();
            alert('已恢复默认配置（原型演示）');
        }

        applyScenario();
    </script>
</body>
</html>
