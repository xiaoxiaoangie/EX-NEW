<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EX平台完整业务流程</title>
    <style>
        :root {
            --primary: #4f46e5;
            --success: #10b981;
            --bg: #f8fafc;
            --bg-card: #ffffff;
            --border: #e2e8f0;
            --text: #0f172a;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'SF Pro Display', 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, #6366f1 100%);
            color: white;
            padding: 40px;
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(79, 70, 229, 0.2);
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .flow-section {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            border: 1px solid var(--border);
        }

        .flow-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border);
        }

        .flow-number {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary) 0%, #6366f1 100%);
            color: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 700;
        }

        .flow-title h2 {
            font-size: 22px;
            font-weight: 600;
        }

        .step-item {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
            border-left: 4px solid var(--primary);
        }

        .step-header {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .checklist {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 8px;
            border-radius: 6px;
        }

        .checklist-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            cursor: pointer;
            accent-color: var(--success);
        }

        .checklist-item label {
            flex: 1;
            cursor: pointer;
            font-size: 14px;
        }

        .checklist-item input[type="checkbox"]:checked + label {
            text-decoration: line-through;
            color: var(--text-muted);
            opacity: 0.7;
        }

        .tag {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 8px;
        }

        .tag-tp {
            background: #dbeafe;
            color: #1e40af;
        }

        .tag-sp {
            background: #fef3c7;
            color: #92400e;
        }

        .tag-merchant {
            background: #dcfce7;
            color: #166534;
        }

        .stats {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .stats-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .stats-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .stats-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>EX平台完整业务流程</h1>
            <p>从前置准备到分佣返点的全流程管理</p>
        </div>

        <!-- 1. 前置准备 -->
        <div class="flow-section">
            <div class="flow-header">
                <div class="flow-number">1</div>
                <div class="flow-title">
                    <h2>前置准备 <span class="tag tag-tp">TP</span><span class="tag tag-sp">SP</span></h2>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">1.1 EX产品上架</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-1-1">
                        <label for="item-1-1-1">产品基本信息配置</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-1-2">
                        <label for="item-1-1-2">产品能力配置</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-1-3">
                        <label for="item-1-1-3">产品上架审核流程</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">1.2 租户与IPL/BB签约，配置费率返点</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-2-1">
                        <label for="item-1-2-1">租户与SP签约</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-2-2">
                        <label for="item-1-2-2">配置SP成本费率</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-2-3">
                        <label for="item-1-2-3">配置返点比例</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-2-4">
                        <label for="item-1-2-4">配置结算周期</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">1.3 租户配置商户标准费率、汇率</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-3-1">
                        <label for="item-1-3-1">配置商户标准费率</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-3-2">
                        <label for="item-1-3-2">配置汇率加价策略</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-3-3">
                        <label for="item-1-3-3">创建费率模板</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">1.4 协议管理</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-4-1">
                        <label for="item-1-4-1">商户注册协议</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-4-2">
                        <label for="item-1-4-2">隐私协议</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-4-3">
                        <label for="item-1-4-3">支付服务协议</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-1-4-4">
                        <label for="item-1-4-4">支付隐私协议</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. 商户入网+开通产品 -->
        <div class="flow-section">
            <div class="flow-header">
                <div class="flow-number">2</div>
                <div class="flow-title">
                    <h2>商户入网+开通产品 <span class="tag tag-merchant">商户</span></h2>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">2.1 商户首次开通产品+提交信息</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-2-1-1">
                        <label for="item-2-1-1">商户注册</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-2-1-2">
                        <label for="item-2-1-2">商户KYC信息提交</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-2-1-3">
                        <label for="item-2-1-3">选择开通产品</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-2-1-4">
                        <label for="item-2-1-4">商户信息审核</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">2.2 租户为商户开通其他产品</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-2-2-1">
                        <label for="item-2-2-1">租户查看商户列表</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-2-2-2">
                        <label for="item-2-2-2">为商户开通新产品</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-2-2-3">
                        <label for="item-2-2-3">配置商户专属费率</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">2.3 租户查看协议确认记录</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-2-3-1">
                        <label for="item-2-3-1">查看商户协议签署记录</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-2-3-2">
                        <label for="item-2-3-2">导出协议确认记录</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. 商户添加收款人 -->
        <div class="flow-section">
            <div class="flow-header">
                <div class="flow-number">3</div>
                <div class="flow-title">
                    <h2>商户添加收款人 <span class="tag tag-merchant">商户</span></h2>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">3.1 添加收款地址</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-1-1">
                        <label for="item-3-1-1">商户添加数币收款地址</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-1-2">
                        <label for="item-3-1-2">地址格式验证</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">3.2 添加收款人银行账户</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-2-1">
                        <label for="item-3-2-1">商户添加银行账户信息</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-2-2">
                        <label for="item-3-2-2">银行账户信息验证</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">3.3 商户收款人查询</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-3-1">
                        <label for="item-3-3-1">商户查看收款人列表</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-3-2">
                        <label for="item-3-3-2">查看收款人审核状态</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">3.4 IPL审核收款人</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-4-1">
                        <label for="item-3-4-1">IPL查看待审核收款人</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-4-2">
                        <label for="item-3-4-2">IPL风控检查</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-4-3">
                        <label for="item-3-4-3">审核通过/拒绝/RFI</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">3.5 BB审核收款人和收款地址</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-5-1">
                        <label for="item-3-5-1">BB查看待审核收款人</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-5-2">
                        <label for="item-3-5-2">BB审核收款地址</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-3-5-3">
                        <label for="item-3-5-3">审核通过/拒绝/RFI</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. 收款 -->
        <div class="flow-section">
            <div class="flow-header">
                <div class="flow-number">4</div>
                <div class="flow-title">
                    <h2>收款流程 <span class="tag tag-merchant">商户</span></h2>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.1 商户申请VA</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-1-1">
                        <label for="item-4-1-1">商户发起VA申请</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-1-2">
                        <label for="item-4-1-2">系统路由选择SP</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-1-3">
                        <label for="item-4-1-3">创建三单（商户单/交易单/渠道单）</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.2 商户VA查询</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-2-1">
                        <label for="item-4-2-1">商户查看VA列表</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-2-2">
                        <label for="item-4-2-2">查看VA详细信息</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.3 租户VA查询</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-3-1">
                        <label for="item-4-3-1">租户查看所有商户VA</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-3-2">
                        <label for="item-4-3-2">按条件筛选VA</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.4 VA过IPL风控</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-4-1">
                        <label for="item-4-4-1">IPL VA申请风控检查</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-4-2">
                        <label for="item-4-4-2">风控通过/拒绝</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.5 VA过BB风控</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-5-1">
                        <label for="item-4-5-1">BB VA申请风控检查</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-5-2">
                        <label for="item-4-5-2">风控通过/拒绝</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.6 IPL查询VA</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-6-1">
                        <label for="item-4-6-1">IPL查看分配的VA列表</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-6-2">
                        <label for="item-4-6-2">VA状态管理</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.7 BB查询VA</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-7-1">
                        <label for="item-4-7-1">BB查看分配的VA列表</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-7-2">
                        <label for="item-4-7-2">VA状态管理</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.8 BB渠道单、交易单、商户单</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-8-1">
                        <label for="item-4-8-1">BB查看商户单列表</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-8-2">
                        <label for="item-4-8-2">BB查看交易单详情</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-8-3">
                        <label for="item-4-8-3">BB查看渠道单详情</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.9 IPL渠道单、交易单、商户单</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-9-1">
                        <label for="item-4-9-1">IPL查看商户单列表</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-9-2">
                        <label for="item-4-9-2">IPL查看交易单详情</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-9-3">
                        <label for="item-4-9-3">IPL查看渠道单详情</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.10 商户端商户单</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-10-1">
                        <label for="item-4-10-1">商户查看收款订单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-10-2">
                        <label for="item-4-10-2">查看订单详情</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.11 租户查看商户单</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-11-1">
                        <label for="item-4-11-1">租户查看所有商户订单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-11-2">
                        <label for="item-4-11-2">查看服务商信息</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.12 IPL入账风控</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-12-1">
                        <label for="item-4-12-1">IPL VA入账风控检查</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-12-2">
                        <label for="item-4-12-2">风控通过自动入账</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">4.13 BB入账风控</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-13-1">
                        <label for="item-4-13-1">BB VA入账风控检查</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-4-13-2">
                        <label for="item-4-13-2">风控通过自动入账</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. 承兑 -->
        <div class="flow-section">
            <div class="flow-header">
                <div class="flow-number">5</div>
                <div class="flow-title">
                    <h2>承兑流程 <span class="tag tag-merchant">商户</span></h2>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">5.1 BB自己Off-Ramp</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-1-1">
                        <label for="item-5-1-1">商户端创建商户单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-1-2">
                        <label for="item-5-1-2">租户查看商户单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-1-3">
                        <label for="item-5-1-3">BB创建三单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-1-4">
                        <label for="item-5-1-4">商户转Crypto到BB</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-1-5">
                        <label for="item-5-1-5">BB换汇并转法币</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">5.2 BB自己On-Ramp</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-2-1">
                        <label for="item-5-2-1">商户端创建商户单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-2-2">
                        <label for="item-5-2-2">租户查看商户单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-2-3">
                        <label for="item-5-2-3">BB创建三单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-2-4">
                        <label for="item-5-2-4">客户转账到VA</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-2-5">
                        <label for="item-5-2-5">BB换汇并转Crypto</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">5.3 IPL-BB On-Ramp</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-3-1">
                        <label for="item-5-3-1">商户端创建商户单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-3-2">
                        <label for="item-5-3-2">租户查看商户单（IPL+BB）</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-3-3">
                        <label for="item-5-3-3">IPL创建交易单/渠道单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-3-4">
                        <label for="item-5-3-4">BB创建交易单/渠道单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-3-5">
                        <label for="item-5-3-5">IPL-BB内部清算</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">5.4 BB-IPL Off-Ramp</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-4-1">
                        <label for="item-5-4-1">商户端创建商户单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-4-2">
                        <label for="item-5-4-2">租户查看商户单（BB+IPL）</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-4-3">
                        <label for="item-5-4-3">BB创建交易单/渠道单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-4-4">
                        <label for="item-5-4-4">IPL创建交易单/渠道单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-4-5">
                        <label for="item-5-4-5">BB-IPL内部清算</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">5.5 BB-IPL Ramp风控</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-5-1">
                        <label for="item-5-5-1">BB侧风控检查</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-5-2">
                        <label for="item-5-5-2">IPL侧风控检查</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-5-5-3">
                        <label for="item-5-5-3">双边风控通过</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. 退款流程 -->
        <div class="flow-section">
            <div class="flow-header">
                <div class="flow-number">6</div>
                <div class="flow-title">
                    <h2>退款流程 <span class="tag tag-merchant">商户</span></h2>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">6.1 BB自己退款流程</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-1-1">
                        <label for="item-6-1-1">商户发起退款申请</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-1-2">
                        <label for="item-6-1-2">系统验证原交易</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-1-3">
                        <label for="item-6-1-3">BB审核退款</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-1-4">
                        <label for="item-6-1-4">创建退款三单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-1-5">
                        <label for="item-6-1-5">BB执行退款</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">6.2 IPL-BB退款流程</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-2-1">
                        <label for="item-6-2-1">商户发起退款申请</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-2-2">
                        <label for="item-6-2-2">系统验证原交易</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-2-3">
                        <label for="item-6-2-3">IPL和BB双方审核</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-2-4">
                        <label for="item-6-2-4">创建退款三单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-2-5">
                        <label for="item-6-2-5">IPL-BB清算调整</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-6-2-6">
                        <label for="item-6-2-6">执行退款</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 7. 商户余额 -->
        <div class="flow-section">
            <div class="flow-header">
                <div class="flow-number">7</div>
                <div class="flow-title">
                    <h2>商户余额管理 <span class="tag tag-merchant">商户</span></h2>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">7.1 商户余额查询</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-1-1">
                        <label for="item-7-1-1">商户查看总余额</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-1-2">
                        <label for="item-7-1-2">按币种查看余额</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-1-3">
                        <label for="item-7-1-3">查看可用/冻结余额</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">7.2 余额记录（本期不要流水）</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-2-1">
                        <label for="item-7-2-1">查看余额变动记录</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-2-2">
                        <label for="item-7-2-2">记录类型分类</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-2-3">
                        <label for="item-7-2-3">关联订单信息</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">7.3 租户查询商户余额</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-3-1">
                        <label for="item-7-3-1">租户查看商户余额汇总</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-3-2">
                        <label for="item-7-3-2">按商户查看余额</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">7.4 BB查询商户余额</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-4-1">
                        <label for="item-7-4-1">BB查看商户余额</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-4-2">
                        <label for="item-7-4-2">余额风险监控</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">7.5 IPL查询商户余额</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-5-1">
                        <label for="item-7-5-1">IPL查看商户余额</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-7-5-2">
                        <label for="item-7-5-2">余额风险监控</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 8. 租户-服务商分佣返点 -->
        <div class="flow-section">
            <div class="flow-header">
                <div class="flow-number">8</div>
                <div class="flow-title">
                    <h2>租户-服务商分佣返点 <span class="tag tag-tp">TP</span><span class="tag tag-sp">SP</span></h2>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">8.1 租户端查询</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-8-1-1">
                        <label for="item-8-1-1">查看分佣账单</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-8-1-2">
                        <label for="item-8-1-2">查看分佣明细</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-8-1-3">
                        <label for="item-8-1-3">查看结算记录</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-8-1-4">
                        <label for="item-8-1-4">查看付款记录</label>
                    </div>
                </div>
            </div>

            <div class="step-item">
                <div class="step-header">8.2 服务商端（针对每个租户）</div>
                <div class="checklist">
                    <div class="checklist-item">
                        <input type="checkbox" id="item-8-2-1">
                        <label for="item-8-2-1">分佣处理</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-8-2-2">
                        <label for="item-8-2-2">结算管理</label>
                    </div>
                    <div class="checklist-item">
                        <input type="checkbox" id="item-8-2-3">
                        <label for="item-8-2-3">付款管理</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="stats">
        <div class="stats-item">
            <span class="stats-label">总计</span>
            <span class="stats-value" id="totalCount">0</span>
        </div>
        <div class="stats-item">
            <span class="stats-label">已完成</span>
            <span class="stats-value" id="completedCount">0</span>
        </div>
        <div class="stats-item">
            <span class="stats-label">进度</span>
            <span class="stats-value" id="progressPercent">0%</span>
        </div>
    </div>

    <script>
        function updateStats() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const total = checkboxes.length;
            const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
            const percent = total > 0 ? Math.round((completed / total) * 100) : 0;

            document.getElementById('totalCount').textContent = total;
            document.getElementById('completedCount').textContent = completed;
            document.getElementById('progressPercent').textContent = percent + '%';

            localStorage.setItem('ex-flow-checkboxes', JSON.stringify(
                Array.from(checkboxes).map(cb => ({ id: cb.id, checked: cb.checked }))
            ));
        }

        function loadSavedState() {
            const saved = localStorage.getItem('ex-flow-checkboxes');
            if (saved) {
                const states = JSON.parse(saved);
                states.forEach(state => {
                    const checkbox = document.getElementById(state.id);
                    if (checkbox) checkbox.checked = state.checked;
                });
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadSavedState();
            updateStats();

            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', updateStats);
            });
        });
    </script>
</body>
</html>
