<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXå¹³å°åŠŸèƒ½æ¸…å• - é¡¹ç›®ç®¡ç†</title>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg: #f8fafc;
            --bg-card: #ffffff;
            --border: #e2e8f0;
            --text: #0f172a;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'SF Pro Display', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: var(--text);
        }

        .header p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* æ ‡ç­¾é¡µå¯¼èˆª */
        .tabs {
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            padding: 8px;
            display: flex;
            gap: 8px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 24px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            font-size: 15px;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .tab-btn:hover {
            background: var(--bg);
            color: var(--text);
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
        }

        .tab-badge {
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 600;
            background: rgba(255,255,255,0.2);
        }

        .tab-btn.active .tab-badge {
            background: rgba(255,255,255,0.3);
        }

        /* ç»Ÿè®¡å¡ç‰‡ */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text);
        }

        .stat-card .progress-bar {
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            margin-top: 12px;
            overflow: hidden;
        }

        .stat-card .progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s ease;
        }

        /* ç­›é€‰å™¨ */
        .filters {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-group label {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .filter-group select,
        .filter-group input {
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 14px;
            background: white;
            color: var(--text);
            min-width: 150px;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .actions {
            margin-left: auto;
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-hover);
        }

        .btn-secondary {
            background: white;
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg);
        }

        /* æ ‡ç­¾é¡µå†…å®¹ */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .content {
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .module-section {
            border-bottom: 1px solid var(--border);
        }

        .module-section:last-child {
            border-bottom: none;
        }

        .module-header {
            padding: 15px 30px;
            background: #f1f5f9;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .module-header h3 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }

        .module-header .module-stats {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .feature-list {
            padding: 0;
        }

        .feature-item {
            padding: 12px 30px 12px 50px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: background 0.2s;
        }

        .feature-item:hover {
            background: #f9fafb;
        }

        .feature-item:last-child {
            border-bottom: none;
        }

        .feature-item.completed {
            opacity: 0.6;
        }

        .feature-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .feature-name {
            flex: 1;
            font-size: 14px;
            color: var(--text);
        }

        .feature-item.completed .feature-name {
            text-decoration: line-through;
        }

        .priority-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            min-width: 40px;
            text-align: center;
        }

        .priority-P0 {
            background: #fee2e2;
            color: #dc2626;
        }

        .priority-P1 {
            background: #fef3c7;
            color: #d97706;
        }

        .priority-P2 {
            background: #dbeafe;
            color: #2563eb;
        }

        .status-select {
            padding: 4px 8px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 12px;
            background: white;
            cursor: pointer;
        }

        .status-æœªå¼€å§‹ { color: var(--text-muted); }
        .status-è¿›è¡Œä¸­ { color: var(--warning); }
        .status-å·²å®Œæˆ { color: var(--success); }
        .status-å·²æµ‹è¯• { color: #8b5cf6; }
        .status-å·²ä¸Šçº¿ { color: var(--primary); }

        .collapsed {
            display: none;
        }

        .expand-icon {
            transition: transform 0.3s;
        }

        .expand-icon.expanded {
            transform: rotate(180deg);
        }

        .empty-state {
            padding: 60px 30px;
            text-align: center;
            color: var(--text-secondary);
        }

        .empty-state svg {
            width: 64px;
            height: 64px;
            margin-bottom: 16px;
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>EXå¹³å°åŠŸèƒ½æ¸…å• - é¡¹ç›®ç®¡ç†</h1>
            <p>å®æ—¶è·Ÿè¸ªé¡¹ç›®è¿›åº¦ï¼Œç®¡ç†åŠŸèƒ½å¼€å‘çŠ¶æ€</p>
        </div>

        <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('merchant')" data-tab="merchant">
                <span>ğŸª å•†æˆ· (MP)</span>
                <span class="tab-badge" id="merchant-count">0</span>
            </button>
            <button class="tab-btn" onclick="switchTab('tenant')" data-tab="tenant">
                <span>ğŸ¢ ç§Ÿæˆ· (TP)</span>
                <span class="tab-badge" id="tenant-count">0</span>
            </button>
            <button class="tab-btn" onclick="switchTab('provider')" data-tab="provider">
                <span>ğŸ¦ æœåŠ¡å•† (SP)</span>
                <span class="tab-badge" id="provider-count">0</span>
            </button>
            <button class="tab-btn" onclick="switchTab('admin')" data-tab="admin">
                <span>âš™ï¸ ç®¡ç†åå° (SA)</span>
                <span class="tab-badge" id="admin-count">0</span>
            </button>
        </div>

        <div class="stats">
            <div class="stat-card">
                <h3>æ€»åŠŸèƒ½æ•°</h3>
                <div class="value" id="totalFeatures">0</div>
            </div>
            <div class="stat-card">
                <h3>å·²å®Œæˆ</h3>
                <div class="value" id="completedFeatures">0</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="completedProgress"></div>
                </div>
            </div>
            <div class="stat-card">
                <h3>è¿›è¡Œä¸­</h3>
                <div class="value" id="inProgressFeatures">0</div>
            </div>
            <div class="stat-card">
                <h3>å®Œæˆç‡</h3>
                <div class="value" id="completionRate">0%</div>
            </div>
        </div>

        <div class="filters">
            <div class="filter-group">
                <label>ä¼˜å…ˆçº§</label>
                <select id="priorityFilter" onchange="renderCurrentTab()">
                    <option value="all">å…¨éƒ¨ä¼˜å…ˆçº§</option>
                    <option value="P0">P0 - å¿…é¡»</option>
                    <option value="P1">P1 - é‡è¦</option>
                    <option value="P2">P2 - ä¼˜åŒ–</option>
                </select>
            </div>
            <div class="filter-group">
                <label>çŠ¶æ€</label>
                <select id="statusFilter" onchange="renderCurrentTab()">
                    <option value="all">å…¨éƒ¨çŠ¶æ€</option>
                    <option value="æœªå¼€å§‹">æœªå¼€å§‹</option>
                    <option value="è¿›è¡Œä¸­">è¿›è¡Œä¸­</option>
                    <option value="å·²å®Œæˆ">å·²å®Œæˆ</option>
                    <option value="å·²æµ‹è¯•">å·²æµ‹è¯•</option>
                    <option value="å·²ä¸Šçº¿">å·²ä¸Šçº¿</option>
                </select>
            </div>
            <div class="filter-group">
                <label>æœç´¢</label>
                <input type="text" id="searchInput" placeholder="æœç´¢åŠŸèƒ½..." oninput="renderCurrentTab()">
            </div>
            <div class="actions">
                <button class="btn btn-secondary" onclick="exportToCSV()">å¯¼å‡ºCSV</button>
                <button class="btn btn-secondary" onclick="clearAllData()">æ¸…é™¤æ•°æ®</button>
                <button class="btn btn-primary" onclick="expandAll()">å±•å¼€å…¨éƒ¨</button>
            </div>
        </div>

        <!-- å•†æˆ· (MP) æ ‡ç­¾é¡µ -->
        <div id="merchant-tab" class="tab-content active">
            <div class="content" id="merchant-list"></div>
        </div>

        <!-- ç§Ÿæˆ· (TP) æ ‡ç­¾é¡µ -->
        <div id="tenant-tab" class="tab-content">
            <div class="content" id="tenant-list"></div>
        </div>

        <!-- æœåŠ¡å•† (SP) æ ‡ç­¾é¡µ -->
        <div id="provider-tab" class="tab-content">
            <div class="content" id="provider-list"></div>
        </div>

        <!-- ç®¡ç†åå° (SA) æ ‡ç­¾é¡µ -->
        <div id="admin-tab" class="tab-content">
            <div class="content" id="admin-list"></div>
        </div>
    </div>

    <script>
        let currentTab = 'merchant';

        // åŠŸèƒ½æ•°æ®
        const features = {
            merchant: [
                { module: 'Dashboard', subModule: 'æ¦‚è§ˆ', feature: 'è´¦æˆ·ä½™é¢å±•ç¤º', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'Dashboard', subModule: 'æ¦‚è§ˆ', feature: 'ä»Šæ—¥äº¤æ˜“ç»Ÿè®¡', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'Dashboard', subModule: 'æ¦‚è§ˆ', feature: 'æœ¬æœˆäº¤æ˜“ç»Ÿè®¡', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'Dashboard', subModule: 'å¿«æ·å…¥å£', feature: 'å¿«é€Ÿæ”¶æ¬¾', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'Dashboard', subModule: 'å¿«æ·å…¥å£', feature: 'å¿«é€Ÿä»˜æ¬¾', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'Dashboard', subModule: 'å¿«æ·å…¥å£', feature: 'å¿«é€Ÿæ¢æ±‡', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'èµ„äº§ç®¡ç†', subModule: 'æ³•å¸è´¦æˆ·', feature: 'å¤šå¸ç§ä½™é¢æŸ¥çœ‹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'èµ„äº§ç®¡ç†', subModule: 'æ³•å¸è´¦æˆ·', feature: 'å¯ç”¨ä½™é¢/å†»ç»“ä½™é¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'èµ„äº§ç®¡ç†', subModule: 'æ³•å¸è´¦æˆ·', feature: 'äº¤æ˜“è®°å½•æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'èµ„äº§ç®¡ç†', subModule: 'åŠ å¯†è´§å¸é’±åŒ…', feature: 'åŠ å¯†è´§å¸ä½™é¢æŸ¥çœ‹', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'èµ„äº§ç®¡ç†', subModule: 'åŠ å¯†è´§å¸é’±åŒ…', feature: 'å……å€¼åœ°å€ç®¡ç†', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'æ”¶æ¬¾', feature: 'åˆ›å»ºæ”¶æ¬¾è®¢å•', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'æ”¶æ¬¾', feature: 'æ”¶æ¬¾æ–¹å¼é€‰æ‹©', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'æ”¶æ¬¾', feature: 'æ”¶æ¬¾è®°å½•æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'æ”¶æ¬¾', feature: 'æ”¶æ¬¾çŠ¶æ€è·Ÿè¸ª', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'ä»˜æ¬¾', feature: 'åˆ›å»ºä»˜æ¬¾è®¢å•', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'ä»˜æ¬¾', feature: 'æ”¶æ¬¾äººç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'ä»˜æ¬¾', feature: 'æ‰¹é‡ä»˜æ¬¾', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'ä»˜æ¬¾', feature: 'ä»˜æ¬¾è®°å½•æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'æ¢æ±‡', feature: 'å®æ—¶æ±‡ç‡æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'æ¢æ±‡', feature: 'åˆ›å»ºæ¢æ±‡è®¢å•', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è½¬è´¦', subModule: 'æ¢æ±‡', feature: 'æ¢æ±‡è®°å½•æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'Crypto', subModule: 'å……å€¼', feature: 'ç”Ÿæˆå……å€¼åœ°å€', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'Crypto', subModule: 'å……å€¼', feature: 'å……å€¼è®°å½•æŸ¥è¯¢', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'Crypto', subModule: 'æç°', feature: 'åˆ›å»ºæç°è®¢å•', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'Crypto', subModule: 'æç°', feature: 'æç°åœ°å€ç®¡ç†', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'Crypto', subModule: 'å…‘æ¢', feature: 'Cryptoâ†”Fiatå…‘æ¢', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'Crypto', subModule: 'On/Off Ramp', feature: 'æ³•å¸å…¥é‡‘', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'Crypto', subModule: 'On/Off Ramp', feature: 'æ³•å¸å‡ºé‡‘', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'å¡ç‰‡', subModule: 'è™šæ‹Ÿå¡', feature: 'ç”³è¯·è™šæ‹Ÿå¡', priority: 'P2', status: 'æœªå¼€å§‹' },
                { module: 'å¡ç‰‡', subModule: 'è™šæ‹Ÿå¡', feature: 'å¡ç‰‡åˆ—è¡¨', priority: 'P2', status: 'æœªå¼€å§‹' },
                { module: 'å¡ç‰‡', subModule: 'è™šæ‹Ÿå¡', feature: 'å¡ç‰‡å……å€¼', priority: 'P2', status: 'æœªå¼€å§‹' },
                { module: 'æ”¶å•', subModule: 'æ”¯ä»˜ç½‘å…³', feature: 'æ”¯ä»˜é“¾æ¥ç”Ÿæˆ', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'æ”¶å•', subModule: 'è®¢å•ç®¡ç†', feature: 'è®¢å•åˆ—è¡¨', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'æ”¶å•', subModule: 'è®¢å•ç®¡ç†', feature: 'è®¢å•é€€æ¬¾', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'æŠ¥è¡¨', subModule: 'äº¤æ˜“æŠ¥è¡¨', feature: 'äº¤æ˜“æ±‡æ€»æŠ¥è¡¨', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'æŠ¥è¡¨', subModule: 'äº¤æ˜“æŠ¥è¡¨', feature: 'äº¤æ˜“æ˜ç»†æŠ¥è¡¨', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'æŠ¥è¡¨', subModule: 'è´¢åŠ¡æŠ¥è¡¨', feature: 'æ”¶å…¥æŠ¥è¡¨', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'æŠ¥è¡¨', subModule: 'è´¢åŠ¡æŠ¥è¡¨', feature: 'æ‰‹ç»­è´¹æŠ¥è¡¨', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'å¼€å‘è€…', subModule: 'APIå¯†é’¥', feature: 'ç”ŸæˆAPI Key', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å¼€å‘è€…', subModule: 'APIå¯†é’¥', feature: 'API Keyç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å¼€å‘è€…', subModule: 'Webhooks', feature: 'Webhook URLé…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å¼€å‘è€…', subModule: 'Webhooks', feature: 'Webhookæ—¥å¿—æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¾ç½®', subModule: 'è´¦æˆ·è®¾ç½®', feature: 'å…¬å¸ä¿¡æ¯', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¾ç½®', subModule: 'è´¦æˆ·è®¾ç½®', feature: 'KYBè®¤è¯', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¾ç½®', subModule: 'å®‰å…¨è®¾ç½®', feature: 'å¯†ç ä¿®æ”¹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¾ç½®', subModule: 'å®‰å…¨è®¾ç½®', feature: 'åŒå› ç´ è®¤è¯(2FA)', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¾ç½®', subModule: 'å›¢é˜Ÿç®¡ç†', feature: 'æˆå‘˜ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¾ç½®', subModule: 'å›¢é˜Ÿç®¡ç†', feature: 'è§’è‰²æƒé™', priority: 'P0', status: 'æœªå¼€å§‹' },
            ],
            tenant: [
                { module: 'å·¥ä½œå°', subModule: 'æ•°æ®æ¦‚è§ˆ', feature: 'ä»Šæ—¥äº¤æ˜“æ¦‚è§ˆ', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å·¥ä½œå°', subModule: 'æ•°æ®æ¦‚è§ˆ', feature: 'æœ¬æœˆä¸šç»©ç»Ÿè®¡', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å·¥ä½œå°', subModule: 'æ•°æ®æ¦‚è§ˆ', feature: 'å•†æˆ·æ•°é‡ç»Ÿè®¡', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å·¥ä½œå°', subModule: 'å®æ—¶ç›‘æ§', feature: 'äº¤æ˜“å®æ—¶ç›‘æ§', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'å·¥ä½œå°', subModule: 'å®æ—¶ç›‘æ§', feature: 'æˆåŠŸç‡ç›‘æ§', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'é‡‡è´­ä¸­å¿ƒ', subModule: 'äº§å“å¸‚åœº', feature: 'æµè§ˆSPäº§å“', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'é‡‡è´­ä¸­å¿ƒ', subModule: 'äº§å“å¸‚åœº', feature: 'äº§å“æœç´¢/ç­›é€‰', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'é‡‡è´­ä¸­å¿ƒ', subModule: 'äº§å“å¸‚åœº', feature: 'äº§å“è¯¦æƒ…æŸ¥çœ‹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'é‡‡è´­ä¸­å¿ƒ', subModule: 'æˆ‘çš„äº§å“', feature: 'å·²ç­¾çº¦äº§å“åˆ—è¡¨', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'é‡‡è´­ä¸­å¿ƒ', subModule: 'ç­¾çº¦ç®¡ç†', feature: 'å‘èµ·ç­¾çº¦ç”³è¯·', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'é‡‡è´­ä¸­å¿ƒ', subModule: 'ç­¾çº¦ç®¡ç†', feature: 'ç­¾çº¦è®°å½•æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ä¾›åº”ä¸­å¿ƒ', subModule: 'äº§å“ç®¡ç†', feature: 'äº§å“åˆ—è¡¨', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ä¾›åº”ä¸­å¿ƒ', subModule: 'äº§å“ç®¡ç†', feature: 'äº§å“é…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ä¾›åº”ä¸­å¿ƒ', subModule: 'äº§å“å®šä»·', feature: 'åŸºç¡€è´¹ç‡é…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ä¾›åº”ä¸­å¿ƒ', subModule: 'äº§å“å®šä»·', feature: 'æ±‡ç‡åŠ ç‚¹é…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·ç®¡ç†', feature: 'å•†æˆ·åˆ—è¡¨', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·ç®¡ç†', feature: 'æ–°å»ºå•†æˆ·', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·ç®¡ç†', feature: 'å•†æˆ·åŸºæœ¬ä¿¡æ¯ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·ç®¡ç†', feature: 'å•†æˆ·çŠ¶æ€ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·ç­¾çº¦', feature: 'å•†æˆ·ç­¾çº¦äº§å“', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·ç­¾çº¦', feature: 'å•†æˆ·ä¸“å±æŠ¥ä»·', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·äº¤æ˜“ç®¡ç†', feature: 'VAè´¦æˆ·ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·äº¤æ˜“ç®¡ç†', feature: 'æ”¶æ¬¾äº¤æ˜“æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·äº¤æ˜“ç®¡ç†', feature: 'ä»˜æ¬¾äº¤æ˜“æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å•†æˆ·ä¸­å¿ƒ', subModule: 'å•†æˆ·äº¤æ˜“ç®¡ç†', feature: 'æ¢æ±‡äº¤æ˜“æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è´¦æˆ·ä¸­å¿ƒ', subModule: 'è´¦æˆ·æ€»è§ˆ', feature: 'è´¦æˆ·ä½™é¢æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è´¦æˆ·ä¸­å¿ƒ', subModule: 'è´¦æˆ·æ€»è§ˆ', feature: 'å¤šå¸ç§ä½™é¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è´¦æˆ·ä¸­å¿ƒ', subModule: 'èµ„é‡‘æµæ°´', feature: 'äº¤æ˜“è®°å½•', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è´¦æˆ·ä¸­å¿ƒ', subModule: 'èµ„é‡‘æµæ°´', feature: 'å……å€¼è®°å½•', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è´¦æˆ·ä¸­å¿ƒ', subModule: 'èµ„é‡‘æµæ°´', feature: 'æç°è®°å½•', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å¼€å‘è€…ä¸­å¿ƒ', subModule: 'APIæ¥å…¥', feature: 'APIæ–‡æ¡£æŸ¥çœ‹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å¼€å‘è€…ä¸­å¿ƒ', subModule: 'å¯†é’¥ç®¡ç†', feature: 'APIå¯†é’¥ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å¼€å‘è€…ä¸­å¿ƒ', subModule: 'å›è°ƒé…ç½®', feature: 'Webhooksé…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'å¼€å‘è€…ä¸­å¿ƒ', subModule: 'å›è°ƒé…ç½®', feature: 'å›è°ƒæ—¥å¿—æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¾ç½®', subModule: 'å›¢é˜Ÿç®¡ç†', feature: 'æˆå‘˜ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¾ç½®', subModule: 'å›¢é˜Ÿç®¡ç†', feature: 'è§’è‰²ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¾ç½®', subModule: 'å›¢é˜Ÿç®¡ç†', feature: 'æƒé™é…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
            ],
            provider: [
                { module: 'äº§å“ç®¡ç†', subModule: 'äº§å“ä¸Šæ¶', feature: 'äº§å“åŸºæœ¬ä¿¡æ¯é…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'äº§å“ç®¡ç†', subModule: 'äº§å“ä¸Šæ¶', feature: 'äº§å“èƒ½åŠ›é…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'äº§å“ç®¡ç†', subModule: 'äº§å“ä¸Šæ¶', feature: 'äº§å“å®šä»·', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'äº§å“ç®¡ç†', subModule: 'äº§å“ç®¡ç†', feature: 'äº§å“åˆ—è¡¨æŸ¥çœ‹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'äº§å“ç®¡ç†', subModule: 'äº§å“ç®¡ç†', feature: 'äº§å“ç¼–è¾‘/æ›´æ–°', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'äº§å“ç®¡ç†', subModule: 'äº§å“ç®¡ç†', feature: 'äº§å“ä¸Šä¸‹æ¶ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'TPç®¡ç†', subModule: 'TPæ¥å…¥ç®¡ç†', feature: 'TPæ¥å…¥ç”³è¯·å®¡æ ¸', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'TPç®¡ç†', subModule: 'TPæ¥å…¥ç®¡ç†', feature: 'TPèµ„è´¨å®¡æ ¸(KYB)', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'TPç®¡ç†', subModule: 'TPæ¥å…¥ç®¡ç†', feature: 'TPç­¾çº¦ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'TPç®¡ç†', subModule: 'TPæ¥å…¥ç®¡ç†', feature: 'TPè´¦å·å¼€é€š', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'TPç®¡ç†', subModule: 'TPå…³ç³»ç®¡ç†', feature: 'TPåˆ—è¡¨æŸ¥çœ‹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'TPç®¡ç†', subModule: 'TPå…³ç³»ç®¡ç†', feature: 'TPåŸºæœ¬ä¿¡æ¯ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'TPç®¡ç†', subModule: 'TPå…³ç³»ç®¡ç†', feature: 'TPçŠ¶æ€ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'TPç®¡ç†', subModule: 'TPäº§å“æˆæƒ', feature: 'äº§å“æˆæƒç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'TPç®¡ç†', subModule: 'TPäº§å“æˆæƒ', feature: 'TPä¸“å±å®šä»·', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'é”€å”®ä¸­å¿ƒ', subModule: 'TPåˆä½œç®¡ç†', feature: 'TPåˆä½œä¼™ä¼´åˆ—è¡¨', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'é”€å”®ä¸­å¿ƒ', subModule: 'TPåˆä½œç®¡ç†', feature: 'TPå±‚çº§ç®¡ç†', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'é”€å”®ä¸­å¿ƒ', subModule: 'åˆ†ä½£ç®¡ç†', feature: 'åˆ†ä½£è§„åˆ™é…ç½®', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'é”€å”®ä¸­å¿ƒ', subModule: 'åˆ†ä½£ç®¡ç†', feature: 'TPåˆ†ä½£è´¦å•ç”Ÿæˆ', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'é”€å”®ä¸­å¿ƒ', subModule: 'ç»“ç®—ç®¡ç†', feature: 'TPç»“ç®—å•ç”Ÿæˆ', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'é”€å”®ä¸­å¿ƒ', subModule: 'ç»“ç®—ç®¡ç†', feature: 'TPä»˜æ¬¾å•ç®¡ç†', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'è®¢å•ç®¡ç†', subModule: 'è®¢å•ç®¡ç†', feature: 'è®¢å•åˆ—è¡¨æŸ¥çœ‹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¢å•ç®¡ç†', subModule: 'è®¢å•ç®¡ç†', feature: 'è®¢å•è¯¦æƒ…æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'æ¸ é“ç®¡ç†', subModule: 'æ¸ é“é…ç½®', feature: 'é“¶è¡Œæ¸ é“é…ç½®', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'æ¸ é“ç®¡ç†', subModule: 'æ¸ é“é…ç½®', feature: 'å¡ç»„ç»‡é…ç½®', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'æ¸ é“ç®¡ç†', subModule: 'æ¸ é“ç›‘æ§', feature: 'æ¸ é“æˆåŠŸç‡ç›‘æ§', priority: 'P1', status: 'æœªå¼€å§‹' },
                { module: 'æ¸ é“ç®¡ç†', subModule: 'æ¸ é“ç›‘æ§', feature: 'æ¸ é“å¯ç”¨æ€§ç›‘æ§', priority: 'P1', status: 'æœªå¼€å§‹' },
            ],
            admin: [
                { module: 'äº§å“ä¸­å¿ƒ', subModule: 'äº§å“ç®¡ç†', feature: 'äº§å“å±æ€§', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'äº§å“ä¸­å¿ƒ', subModule: 'äº§å“ç®¡ç†', feature: 'äº§å“é…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'äº§å“ä¸­å¿ƒ', subModule: 'äº§å“ç®¡ç†', feature: 'EXå¥—é¤ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'æœåŠ¡å•†ç®¡ç†', subModule: 'æœåŠ¡å•†ç®¡ç†', feature: 'æœåŠ¡å•†æ¡£æ¡ˆ', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'æœåŠ¡å•†ç®¡ç†', subModule: 'æœåŠ¡å•†ç®¡ç†', feature: 'æœåŠ¡å•†äº§å“', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ç§Ÿæˆ·ç®¡ç†', subModule: 'ç§Ÿæˆ·ç®¡ç†', feature: 'ç§Ÿæˆ·ç­¾çº¦ç”³è¯·', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ç§Ÿæˆ·ç®¡ç†', subModule: 'ç§Ÿæˆ·ç®¡ç†', feature: 'ç§Ÿæˆ·åŸºæœ¬ä¿¡æ¯', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ç§Ÿæˆ·ç®¡ç†', subModule: 'ç§Ÿæˆ·ç®¡ç†', feature: 'ç§Ÿæˆ·äº§å“ç­¾çº¦', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¡è´¹ä¸­å¿ƒ', subModule: 'ä¸šåŠ¡äº§å“', feature: 'ä¸šåŠ¡äº§å“æ”¶è´¹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'è®¡è´¹ä¸­å¿ƒ', subModule: 'EXæœåŠ¡', feature: 'EXç™½ç‰ŒAPIæ”¶è´¹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'æ±‡ç‡ä¸­å¿ƒ', subModule: 'æ±‡ç‡ç®¡ç†', feature: 'æ±‡ç‡æºç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'æ±‡ç‡ä¸­å¿ƒ', subModule: 'æ±‡ç‡ç®¡ç†', feature: 'æ±‡ç‡æºå¸ç§å¯¹', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'æ±‡ç‡ä¸­å¿ƒ', subModule: 'æ±‡ç‡ç®¡ç†', feature: 'æ±‡ç‡æŸ¥è¯¢', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ç³»ç»Ÿç®¡ç†', subModule: 'ç³»ç»Ÿç®¡ç†', feature: 'ç§Ÿæˆ·è´¦å·ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ç³»ç»Ÿç®¡ç†', subModule: 'ç³»ç»Ÿç®¡ç†', feature: 'è§’è‰²æƒé™ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ç³»ç»Ÿç®¡ç†', subModule: 'ç³»ç»Ÿç®¡ç†', feature: 'APIå¯†é’¥ç®¡ç†', priority: 'P0', status: 'æœªå¼€å§‹' },
                { module: 'ç³»ç»Ÿç®¡ç†', subModule: 'ç³»ç»Ÿç®¡ç†', feature: 'ç³»ç»Ÿå‚æ•°é…ç½®', priority: 'P0', status: 'æœªå¼€å§‹' },
            ]
        };

        // ä»localStorageåŠ è½½æ•°æ®
        function loadData() {
            const saved = localStorage.getItem('exFeatureListTabs');
            if (saved) {
                const savedData = JSON.parse(saved);
                Object.keys(features).forEach(role => {
                    if (savedData[role]) {
                        features[role].forEach((feature, index) => {
                            if (savedData[role][index]) {
                                feature.status = savedData[role][index].status;
                                feature.completed = savedData[role][index].completed;
                            }
                        });
                    }
                });
            }
        }

        // ä¿å­˜æ•°æ®åˆ°localStorage
        function saveData() {
            const data = {};
            Object.keys(features).forEach(role => {
                data[role] = features[role].map(f => ({
                    status: f.status,
                    completed: f.completed || false
                }));
            });
            localStorage.setItem('exFeatureListTabs', JSON.stringify(data));
        }

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tab) {
            currentTab = tab;
            
            // æ›´æ–°æ ‡ç­¾æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
            
            // æ›´æ–°æ ‡ç­¾é¡µå†…å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tab}-tab`).classList.add('active');
            
            renderCurrentTab();
        }

        // æ¸²æŸ“å½“å‰æ ‡ç­¾é¡µ
        function renderCurrentTab() {
            const priorityFilter = document.getElementById('priorityFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            let filtered = features[currentTab].filter(f => {
                if (priorityFilter !== 'all' && f.priority !== priorityFilter) return false;
                if (statusFilter !== 'all' && f.status !== statusFilter) return false;
                if (searchTerm && !f.feature.toLowerCase().includes(searchTerm)) return false;
                return true;
            });

            const container = document.getElementById(`${currentTab}-list`);
            
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                        <p>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„åŠŸèƒ½</p>
                    </div>
                `;
                return;
            }

            // æŒ‰æ¨¡å—åˆ†ç»„
            const grouped = {};
            filtered.forEach(f => {
                if (!grouped[f.module]) grouped[f.module] = [];
                grouped[f.module].push(f);
            });

            let html = '';
            Object.keys(grouped).forEach(module => {
                const moduleFeatures = grouped[module];
                const moduleCompleted = moduleFeatures.filter(f => f.completed).length;
                
                html += `
                    <div class="module-section">
                        <div class="module-header" onclick="toggleModule(this)">
                            <h3>${module}</h3>
                            <div class="module-stats">
                                ${moduleCompleted}/${moduleFeatures.length} å·²å®Œæˆ
                            </div>
                            <svg class="expand-icon expanded" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"/>
                            </svg>
                        </div>
                        <div class="feature-list">
                `;

                moduleFeatures.forEach((feature) => {
                    const featureIndex = features[currentTab].indexOf(feature);
                    html += `
                        <div class="feature-item ${feature.completed ? 'completed' : ''}" data-index="${featureIndex}">
                            <input type="checkbox" ${feature.completed ? 'checked' : ''} onchange="toggleFeature('${currentTab}', ${featureIndex})">
                            <span class="feature-name">${feature.feature}</span>
                            <span class="priority-badge priority-${feature.priority}">${feature.priority}</span>
                            <select class="status-select status-${feature.status}" onchange="updateStatus('${currentTab}', ${featureIndex}, this.value)">
                                <option value="æœªå¼€å§‹" ${feature.status === 'æœªå¼€å§‹' ? 'selected' : ''}>æœªå¼€å§‹</option>
                                <option value="è¿›è¡Œä¸­" ${feature.status === 'è¿›è¡Œä¸­' ? 'selected' : ''}>è¿›è¡Œä¸­</option>
                                <option value="å·²å®Œæˆ" ${feature.status === 'å·²å®Œæˆ' ? 'selected' : ''}>å·²å®Œæˆ</option>
                                <option value="å·²æµ‹è¯•" ${feature.status === 'å·²æµ‹è¯•' ? 'selected' : ''}>å·²æµ‹è¯•</option>
                                <option value="å·²ä¸Šçº¿" ${feature.status === 'å·²ä¸Šçº¿' ? 'selected' : ''}>å·²ä¸Šçº¿</option>
                            </select>
                        </div>
                    `;
                });

                html += `
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
            updateStats();
            updateTabCounts();
        }

        function toggleFeature(role, index) {
            features[role][index].completed = !features[role][index].completed;
            if (features[role][index].completed && features[role][index].status === 'æœªå¼€å§‹') {
                features[role][index].status = 'å·²å®Œæˆ';
            }
            saveData();
            renderCurrentTab();
        }

        function updateStatus(role, index, status) {
            features[role][index].status = status;
            if (status === 'å·²å®Œæˆ' || status === 'å·²æµ‹è¯•' || status === 'å·²ä¸Šçº¿') {
                features[role][index].completed = true;
            }
            saveData();
            renderCurrentTab();
        }

        function updateStats() {
            const allFeatures = Object.values(features).flat();
            const total = allFeatures.length;
            const completed = allFeatures.filter(f => f.completed).length;
            const inProgress = allFeatures.filter(f => f.status === 'è¿›è¡Œä¸­').length;
            const rate = ((completed / total) * 100).toFixed(1);

            document.getElementById('totalFeatures').textContent = total;
            document.getElementById('completedFeatures').textContent = completed;
            document.getElementById('inProgressFeatures').textContent = inProgress;
            document.getElementById('completionRate').textContent = rate + '%';
            document.getElementById('completedProgress').style.width = rate + '%';
        }

        function updateTabCounts() {
            document.getElementById('merchant-count').textContent = features.merchant.length;
            document.getElementById('tenant-count').textContent = features.tenant.length;
            document.getElementById('provider-count').textContent = features.provider.length;
            document.getElementById('admin-count').textContent = features.admin.length;
        }

        function toggleModule(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('.expand-icon');
            content.classList.toggle('collapsed');
            icon.classList.toggle('expanded');
        }

        function expandAll() {
            document.querySelectorAll('.feature-list').forEach(el => {
                el.classList.remove('collapsed');
            });
            document.querySelectorAll('.expand-icon').forEach(icon => {
                icon.classList.add('expanded');
            });
        }

        function exportToCSV() {
            let csv = 'è§’è‰²,æ¨¡å—,å­æ¨¡å—,åŠŸèƒ½ç‚¹,ä¼˜å…ˆçº§,çŠ¶æ€,å®Œæˆ\n';
            Object.keys(features).forEach(role => {
                const roleName = {merchant: 'å•†æˆ·(MP)', tenant: 'ç§Ÿæˆ·(TP)', provider: 'æœåŠ¡å•†(SP)', admin: 'ç®¡ç†åå°(SA)'}[role];
                features[role].forEach(f => {
                    csv += `${roleName},${f.module},${f.subModule},${f.feature},${f.priority},${f.status},${f.completed ? 'æ˜¯' : 'å¦'}\n`;
                });
            });
            
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'EXåŠŸèƒ½æ¸…å•_' + new Date().toISOString().split('T')[0] + '.csv';
            link.click();
        }

        function clearAllData() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰è¿›åº¦æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                localStorage.removeItem('exFeatureListTabs');
                Object.keys(features).forEach(role => {
                    features[role].forEach(f => {
                        f.status = 'æœªå¼€å§‹';
                        f.completed = false;
                    });
                });
                renderCurrentTab();
            }
        }

        // åˆå§‹åŒ–
        loadData();
        renderCurrentTab();
    </script>
</body>
</html>
